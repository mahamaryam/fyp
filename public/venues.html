<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Venue Recommendations</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- AOS CSS -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">

  <!-- AOS JS -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

  <link rel="stylesheet" href="style.css" />

</head>
<div id="progress-bar"></div>

<body style="background: url('img/bg.jpg') no-repeat center center fixed; background-size: cover;">
  <div class="overlay"></div>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
    <div class="container-fluid">
      <div class="dropdown">
        <a class="navbar-brand dropdown-toggle" href="#" id="weddingWizDropdown" role="button" data-bs-toggle="dropdown"
          aria-expanded="false">
          <img id="logo-nav" src="img/logo.png" alt="" style="width: 60px; height: 50px; margin-right: 10px;" />
          <span style="font-size: 1.5rem;" onclick="location.href='homepage.html'">Wedding Wiz</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-animated" aria-labelledby="weddingWizDropdown">
          <li><a class="dropdown-item" href="venues.html">üíç Venue Recommendations</a></li>
          <li><a class="dropdown-item" href="3d.html">üéÅ 3-D Decor Visualization</a></li>
          <li><a class="dropdown-item" href="decor.html">üìã Vendor Recommendations</a></li>
        </ul>
      </div>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fad fa-bars"></i></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto" id="nav-content">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="homepage.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="homepage.html#section3">Clients</a>
          </li>
          <li class="nav-item">
            <div class="dropdown">
              <a class="navbar-brand dropdown-toggle" href="#" id="serviesDropdown" role="button"
                data-bs-toggle="dropdown" aria-expanded="false" style="font-size: 18px;"
                onclick="location.href='services.html'">
                Services
              </a>
              <ul class="dropdown-menu dropdown-menu-animated" aria-labelledby="servicesDropdown">
                <li><a class="dropdown-item" href="venues.html"> Wedding Venues</a></li>
                <li><a class="dropdown-item" href="photographers.html"> Photographers</a></li>
                <li><a class="dropdown-item" href="decor.html"> Decor </a></li>
                <li><a class="dropdown-item" href="attire.html"> Attire </a></li>
                <li><a class="dropdown-item" href="jewellery.html"> Jewellary </a></li>
                <li><a class="dropdown-item" href="salon.html"> Bridal Salon </a></li>
              </ul>
            </div>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="homepage.html#section4">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div style="margin-left: 50px; margin-right: 50px; font-size: 22px;">
    <br>
    <h1 data-aos="fade-down" data-aos-duration="1000">
      Wedding halls and marquees in Pakistan
    </h1><br>
    <p data-aos="fade-up" data-aos-duration="1500" data-aos-delay="500">
      Explore the finest wedding venues in Pakistan with Wedding Wiz, offering stunning spaces to
      bring your dream wedding to life. From luxurious wedding marquees in Islamabad to elegant halls
      in Lahore and Rawalpindi, find venues that blend sophistication, comfort, and modern
      amenities for an unforgettable celebration.</p><br>


    <p data-aos="fade-up" data-aos-duration="1500" data-aos-delay="500">
      Whether you're planning a grand Mehndi in a spacious marquee or an intimate Valima in a charming
      hall, Wedding Wiz provides a diverse range of options tailored to your style and budget.
    </p><br>

    <p data-aos="fade-up" data-aos-duration="1500" data-aos-delay="500">
      Discover marquee marriage halls in Lahore and Rawalpindi renowned for their excellent service, exquisite d√©cor,
      and
      versatile setups. Whether it's a contemporary wedding theme or a traditional Baraat, these venues offer the
      perfect
      balance of elegance and functionality.
    </p><br>

    <p data-aos="fade-up" data-aos-duration="1500" data-aos-delay="500">
      Let Wedding Wiz guide you to venues that promise unforgettable memories, with settings that cater to all your
      wedding needs
      while ensuring exceptional hospitality and attention to detail.
    </p><br>
  </div>
  <div class="container-custom">
    <div class="row">
      <!-- Filter Section -->
      <div class="col-md-3 col-12 filter-container p-4">
        <button class="btn btn-primary w-100 d-md-none mb-3" style="background-color: #bb536f" type="button"
          data-bs-toggle="collapse" data-bs-target="#filterSection" aria-expanded="false" aria-controls="filterSection">
          Filters
        </button>
        <div class="collapse d-md-block" id="filterSection">
          <h5 class="mt-3">Filters</h5>
          <hr>
          <!-- City Filter -->
          <div class="mb-3">
            <h6>City</h6>
            <table class="table table-borderless">
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="lahore">
                    <label class="form-check-label" for="lahore">Lahore</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="karachi">
                    <label class="form-check-label" for="karachi">Karachi</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="islamabad">
                    <label class="form-check-label" for="islamabad">Islamabad</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="rawalpindi">
                    <label class="form-check-label" for="rawalpindi">Rawalpindi</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <hr>
          <!-- Sub Area Filter -->
          <div class="mb-3">
            <h6>Sub Area</h6>
            <input type="text" class="form-control" placeholder="e.g., G-10 Markaz">
          </div>
          <hr>
          <!-- Budget Filter -->
          <div class="mb-3">
            <h6>Budget (per person)</h6>
            <table class="table table-borderless">
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="budget1">
                    <label class="form-check-label" for="budget1">0 - 1400</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="budget2">
                    <label class="form-check-label" for="budget2">1401 - 1800</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="budget3">
                    <label class="form-check-label" for="budget3">1801 - 2400</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="budget4">
                    <label class="form-check-label" for="budget4">2401 - 3500</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="budget5">
                    <label class="form-check-label" for="budget5">3501 - 4500</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="budget6">
                    <label class="form-check-label" for="budget6">4500+</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <hr>
          <!-- Type Filter -->
          <div class="mb-3">
            <h6>Type</h6>
            <table class="table table-borderless">
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="hall">
                    <label class="form-check-label" for="hall">Hall</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="outdoor">
                    <label class="form-check-label" for="outdoor">Outdoor</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="marquee">
                    <label class="form-check-label" for="marquee">Marquee/Banquet</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="other">
                    <label class="form-check-label" for="other">Other</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <hr>
          <!-- Capacity Filter -->
          <div class="mb-3">
            <h6>Capacity</h6>
            <table class="table table-borderless">
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="zerotohundred">
                    <label class="form-check-label" for="zerotohundred">0 - 100</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="tothreehundred">
                    <label class="form-check-label" for="tothreehundred">101 - 300</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="tosix00">
                    <label class="form-check-label" for="tosix00">301 - 600</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="tothousand">
                    <label class="form-check-label" for="tothousand">601 - 1000</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="fifteenhundred">
                    <label class="form-check-label" for="fifteenhundred">1001 - 1500</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="fifteenplus">
                    <label class="form-check-label" for="fifteenplus">1500+</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <hr>
          <!-- Staff Filter -->
          <div class="mb-3">
            <h6>Staff</h6>
            <table class="table table-borderless">
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="male">
                    <label class="form-check-label" for="male">Male</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="female">
                    <label class="form-check-label" for="female">Female</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="trans">
                    <label class="form-check-label" for="trans">Transgender</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <hr>
          <!-- Cancellation Policy -->
          <div class="mb-3">
            <h6>Cancellation Policy</h6>
            <table class="table table-borderless">
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="refundable">
                    <label class="form-check-label" for="refundable">Refundable</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="nonrefundable">
                    <label class="form-check-label" for="nonrefundable">Non-Refundable</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="partial">
                    <label class="form-check-label" for="partial">Partially Refundable</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <!-- Venues Section -->
      <div class="col-md-9 col-12">
        <div class="row mb-4">
          <div class="col">
            <input type="text" id="search-venue" class="form-control" placeholder="Search venues...">
          </div>
        </div>
        <div class="row venues-container">
          <!-- Venues will be loaded here dynamically -->
          <div class="text-center">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Booking Modal -->
  <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="bookingModalLabel">Book Venue</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="bookingForm">
            <input type="hidden" id="venueId">
            <div class="mb-3">
              <label for="bookingDate" class="form-label">Event Date</label>
              <input type="date" class="form-control" id="bookingDate" required>
            </div>
            <div class="mb-3">
              <label for="numberOfGuests" class="form-label">Number of Guests</label>
              <input type="number" class="form-control" id="numberOfGuests" required>
            </div>
            <div class="mb-3">
              <label for="eventType" class="form-label">Event Type</label>
              <select class="form-control" id="eventType" required>
                <option value="">Select Event Type</option>
                <option value="wedding">Wedding</option>
                <option value="reception">Reception</option>
                <option value="engagement">Engagement</option>
                <option value="mehndi">Mehndi</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="confirmBooking">Book Now</button>
        </div>
      </div>
    </div>
  </div>

  <!--Footer-->
  <footer style="margin-top: 200px;">
    <div class="container-fluid padding">
      <div class="row text-center">
        <div class="col-md-4">
          <hr class="light">
          <img id="logo-footer" src="img/logo.png" alt="">
          <hr class="light">
          <p>042-123-456</p>
          <p>weddingwiz@gmail.com</p>
          <p>Street 123</p>
          <p>Lahore, 54000</p>
        </div>
        <div class="col-md-4">
          <hr class="light">
          <h5>Our Timings</h5>
          <hr class="light">
          <p>Monday:9am to 5pm</p>
          <p>Saturday:10am to 4pm</p>
          <p>Sunday:Closed</p>
        </div>
        <div class="col-md-4">
          <hr class="light">
          <h5>Service Areas</h5>
          <hr class="light">
          <p>Karachi, 07516</p>
          <p>Islamabad, 44050</p>
          <p>Rawalpindi, 44000</p>
          <p>Multan, 66000</p>
        </div>
      </div>
      <div class="col-12 text-center">
        <hr class="light">
        <h5>&copy; WeddingWizOfficial</h5>
      </div>
    </div>
  </footer>


  <script src="filtercheck.js"></script>
  <script src="dropdown.js"></script>
  <script src="AOS.js"></script>
  <script src="progressbar.js"></script>
  <script src="js/api-client.js"></script>
  <script src="js/venues.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/navbar.js"></script>
  <script>
    // Initialize AOS
    AOS.init();

    // Check authentication on page load
    document.addEventListener('DOMContentLoaded', function () {
      const token = localStorage.getItem('token');
      if (!token) {
        // If no token, redirect to login
        window.location.href = 'login.html';
        return;
      }

      // Token exists, continue loading venues
      loadVenues(token);
    });

    async function loadVenues(token) {
      try {
        const response = await fetch('http://localhost:4201/api/venues', {
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });

        if (!response.ok) {
          if (response.status === 401) {
            // Token is invalid or expired
            localStorage.removeItem('token');
            window.location.href = 'login.html';
            return;
          }
          throw new Error('Failed to load venues');
        }

        const data = await response.json();
        // Process and display venues data
        displayVenues(data);
      } catch (error) {
        console.error('Error loading venues:', error);
        alert('Failed to load venues. Please try again later.');
      }
    }

    function displayVenues(venues) {
      const venuesContainer = document.querySelector('.venues-container');
      if (!venuesContainer) return;

      venuesContainer.innerHTML = venues.map(venue => `
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up">
                <div class="card h-100">
                    <img src="${venue.image}" class="card-img-top" alt="${venue.name}">
                    <div class="card-body">
                        <h5 class="card-title">${venue.name}</h5>
                        <p class="card-text">${venue.description}</p>
                        <p class="card-text"><small class="text-muted">Capacity: ${venue.capacity} guests</small></p>
                        <p class="card-text"><strong>Price: $${venue.price}</strong></p>
                        <button class="btn btn-primary book-venue" data-venue-id="${venue._id}">Book Now</button>
                    </div>
                </div>
            </div>
        `).join('');

      // Add booking handlers
      document.querySelectorAll('.book-venue').forEach(button => {
        button.addEventListener('click', async (e) => {
          const token = localStorage.getItem('token');
          if (!token) {
            window.location.href = 'login.html';
            return;
          }

          const venueId = e.target.dataset.venueId;
          try {
            const bookingData = {
              date: new Date().toISOString(),
              numberOfGuests: 100,
            };

            const response = await fetch(`http://localhost:4201/api/venues/${venueId}/book`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
              },
              body: JSON.stringify(bookingData)
            });

            if (!response.ok) {
              if (response.status === 401) {
                localStorage.removeItem('token');
                window.location.href = 'login.html';
                return;
              }
              throw new Error('Failed to book venue');
            }

            const result = await response.json();
            if (result.success) {
              alert('Venue booked successfully!');
            } else {
              alert(result.message || 'Failed to book venue');
            }
          } catch (error) {
            console.error('Booking error:', error);
            alert('Failed to book venue. Please try again later.');
          }
        });
      });
    }

    // Require authentication for venues page
    document.addEventListener('DOMContentLoaded', function () {
      Auth.requireAuth();
    });
  </script>
</body>

</html>